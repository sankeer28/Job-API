<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Job API â€” Search every job board at once</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Crect x='2' y='7' width='16' height='11' stroke='white' stroke-width='1.5' fill='none'/%3E%3Cpath d='M7 7V5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2' stroke='white' stroke-width='1.5' fill='none'/%3E%3Ccircle cx='9.5' cy='12.5' r='2.8' stroke='white' stroke-width='1.3' fill='none'/%3E%3Cpath d='M11.5 14.5L13.5 16.5' stroke='white' stroke-width='1.3' stroke-linecap='round'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --blue:       #0071E3;
      --blue-h:     #0077ED;
      --blue-glow:  rgba(0,113,227,.18);
      --bg:         #F5F5F7;
      --surface:    #FFFFFF;
      --border:     rgba(0,0,0,.08);
      --text:       #1D1D1F;
      --sub:        #6E6E73;
      --green:      #34C759;
      --purple:     #8E4EC6;
      --r: 0;
      --rs: 0;
      --font:       'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
      --mono:       'JetBrains Mono', monospace;
    }

    html.dark {
      --bg:      #000;
      --surface: #1C1C1E;
      --border:  rgba(255,255,255,.08);
      --text:    #F5F5F7;
      --sub:     #98989D;
      --blue-glow: rgba(0,113,227,.22);
    }
    html.dark nav { background: rgba(0,0,0,.78); border-bottom-color: rgba(255,255,255,.06); }
    html.dark input, html.dark select { background: #2C2C2E; color: var(--text); border-color: var(--border); }
    html.dark input::placeholder { color: #555; }
    html.dark .field select { background-color: #2C2C2E; }
    html.dark select option { background: #2C2C2E; color: #F5F5F7; }

    body {
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding-bottom: 120px;
      overflow-x: hidden;
    }

    /* â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    nav {
      position: sticky; top: 0; z-index: 100;
      height: 48px;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 32px;
      background: rgba(255,255,255,.78);
      backdrop-filter: saturate(180%) blur(24px);
      -webkit-backdrop-filter: saturate(180%) blur(24px);
      border-bottom: 1px solid var(--border);
      animation: navIn .55s cubic-bezier(.22,1,.36,1) forwards;
    }
    @keyframes navIn { from { transform: translateY(-100%); opacity: 0; } to { transform: none; opacity: 1; } }

    .nav-logo {
      font-size: 15px; font-weight: 700; letter-spacing: -.4px;
      color: var(--text); text-decoration: none;
      display: flex; align-items: center; gap: 8px;
    }
    .nav-logo-mark {
      width: 28px; height: 28px; background: transparent;
      display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    }
    .nav-links {
      position: absolute; left: 50%; transform: translateX(-50%);
      display: flex; align-items: center; gap: 2px;
    }
    .nav-link {
      font-size: 13px; font-weight: 500; color: var(--sub);
      text-decoration: none; padding: 5px 14px; border-radius: 0;
      transition: background .15s, color .15s;
    }
    .nav-link:hover { background: rgba(0,0,0,.04); color: var(--text); }
    html.dark .nav-link:hover { background: rgba(255,255,255,.07); }
    .nav-link.active { color: var(--text); font-weight: 600; }
    .dark-toggle {
      width: 32px; height: 32px; border: none; background: transparent;
      border-radius: 0; cursor: pointer; color: var(--sub);
      display: flex; align-items: center; justify-content: center;
      transition: background .15s, color .15s;
    }
    .dark-toggle:hover { background: rgba(0,0,0,.06); color: var(--text); }
    html.dark .dark-toggle:hover { background: rgba(255,255,255,.08); }

    /* â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hero {
      position: relative; text-align: center;
      padding: 96px 24px 60px; overflow: hidden;
    }
    /* Ambient blobs */
    .hero::before {
      content: ''; position: absolute; top: -80px; left: 50%;
      transform: translateX(-50%); width: 1000px; height: 700px;
      background: radial-gradient(ellipse 60% 55% at 50% 40%,
        rgba(0,113,227,.1) 0%, rgba(0,200,255,.04) 45%, transparent 70%);
      pointer-events: none; animation: blobDrift 10s ease-in-out infinite alternate;
    }
    .hero::after {
      content: ''; position: absolute; top: 10%; right: 12%; width: 220px; height: 220px;
      background: radial-gradient(circle, rgba(0,113,227,.07), transparent 70%);
      border-radius: 0; pointer-events: none;
      animation: blobDrift 7s ease-in-out 2s infinite alternate;
    }
    @keyframes blobDrift {
      from { transform: translateX(-50%) scale(1); }
      to   { transform: translateX(-50%) scale(1.08) translateY(-12px); }
    }

    .hero h1 {
      font-size: clamp(38px, 5.5vw, 64px);
      font-weight: 800; letter-spacing: -2.5px; line-height: 1.08;
      color: var(--text); margin-bottom: 24px;
    }
    .hero-line { display: block; overflow: hidden; padding-bottom: 0.14em; margin-bottom: -0.14em; }
    .hero-line-inner {
      display: block; opacity: 0; transform: translateY(40px);
      animation: lineReveal .85s cubic-bezier(.22,1,.36,1) forwards;
    }
    .hero-line:nth-child(1) .hero-line-inner { animation-delay: .22s; }
    .hero-line:nth-child(2) .hero-line-inner { animation-delay: .38s; }
    @keyframes lineReveal { to { opacity: 1; transform: none; } }

    .g-text {
      color: var(--blue);
      background: none;
      -webkit-text-fill-color: var(--blue);
    }

    .hero-sub {
      font-size: clamp(16px, 2vw, 19px); color: var(--sub);
      max-width: 480px; margin: 0 auto; line-height: 1.62; font-weight: 400;
      opacity: 0; animation: fadeUp .65s cubic-bezier(.22,1,.36,1) .58s forwards;
    }
    @keyframes fadeUp { from { opacity: 0; transform: translateY(28px); } to { opacity: 1; transform: none; } }

    /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .container { max-width: 1080px; margin: 0 auto; padding: 0 24px; }

    /* â”€â”€ Form Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-card {
      background: var(--surface);
      border-radius: 0;
      box-shadow: 0 2px 6px rgba(0,0,0,.05), 0 8px 48px rgba(0,0,0,.09), 0 0 0 1px var(--border);
      padding: 36px 36px 32px;
      margin-bottom: 44px;
      opacity: 0; animation: fadeUp .7s cubic-bezier(.22,1,.36,1) .72s forwards;
    }

    .sec-label {
      font-size: 10.5px; font-weight: 700; text-transform: uppercase;
      letter-spacing: .85px; color: var(--sub); margin-bottom: 14px;
    }

    /* Sites */
    .sites-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 28px; }
    .site-chip {
      display: inline-flex; align-items: center; gap: 7px;
      padding: 8px 16px; border-radius: 0;
      border: 1.5px solid var(--border);
      font-size: 13px; font-weight: 500; color: var(--sub);
      cursor: pointer; user-select: none; background: var(--bg);
      transition: all .22s cubic-bezier(.34,1.56,.64,1);
    }
    .site-chip:hover { border-color: var(--blue); color: var(--blue); transform: scale(1.04); }
    .site-chip input[type="checkbox"] { display: none; }
    .chip-dot {
      width: 7px; height: 7px; border-radius: 0; background: var(--blue);
      opacity: 0; transform: scale(0);
      transition: opacity .2s, transform .2s cubic-bezier(.34,1.56,.64,1);
    }
    .site-chip.active { background: rgba(0,113,227,.08); border-color: rgba(0,113,227,.3); color: var(--blue); font-weight: 600; }
    .site-chip.active .chip-dot { opacity: 1; transform: scale(1); }

    /* Form grid */
    .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .form-grid .full { grid-column: 1 / -1; }
    .field { display: flex; flex-direction: column; gap: 7px; }
    .field label { font-size: 11.5px; font-weight: 600; color: var(--sub); letter-spacing: .1px; }
    .field input, .field select {
      height: 44px; padding: 0 16px;
      border: 1.5px solid var(--border); border-radius: 0;
      font-size: 15px; font-family: var(--font); font-weight: 400;
      color: var(--text); background: var(--bg); outline: none;
      transition: border-color .15s, box-shadow .15s, background .15s;
      appearance: none; -webkit-appearance: none;
    }
    .field select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%236E6E73' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat; background-position: right 14px center; padding-right: 38px;
    }
    .field input:focus, .field select:focus {
      border-color: var(--blue); background: var(--surface);
      box-shadow: 0 0 0 4px rgba(0,113,227,.1);
    }
    .field input::placeholder { color: #B0B0B5; }

    /* Submit */
    .submit-row { display: flex; align-items: center; gap: 16px; margin-top: 24px; }
    .btn-search {
      height: 50px; padding: 0 36px; background: var(--blue); color: #fff;
      border: none; border-radius: 0; font-size: 15px; font-weight: 600;
      font-family: var(--font); letter-spacing: -.1px;
      cursor: pointer; display: flex; align-items: center; gap: 9px;
      transition: background .15s, transform .2s cubic-bezier(.34,1.56,.64,1), box-shadow .15s;
    }
    .btn-search:hover {
      background: var(--blue-h); transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,113,227,.38);
    }
    .btn-search:active { transform: scale(.97); }
    .btn-search:disabled { background: #B0C4E8; cursor: not-allowed; transform: none; box-shadow: none; }

    .spinner {
      display: none; width: 18px; height: 18px;
      border: 2px solid rgba(255,255,255,.35); border-top-color: #fff;
      border-radius: 50%; animation: spin .65s linear infinite;
    }
    .loading .spinner { display: block; }
    .loading .btn-icon { display: none; }
    @keyframes spin { to { transform: rotate(360deg); } }

    .btn-hint { font-size: 13px; color: var(--sub); }

    /* â”€â”€ Results â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #results-section { display: none; }
    .results-hd { display: flex; align-items: center; justify-content: space-between; margin-bottom: 22px; }
    .results-hd h2 { font-size: 24px; font-weight: 700; letter-spacing: -.6px; }
    .count-badge {
      background: var(--blue); color: #fff;
      font-size: 12px; font-weight: 700; padding: 4px 13px; border-radius: 0;
    }

    .jobs-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(330px,1fr)); gap: 14px; }

    /* Job card */
    .job-card {
      background: var(--surface); border-radius: 0; padding: 22px 24px;
      display: flex; flex-direction: column; gap: 13px;
      box-shadow: 0 1px 4px rgba(0,0,0,.05), 0 0 0 1px var(--border);
      opacity: 0; transform: translateY(22px);
      transition: opacity .5s ease, transform .5s cubic-bezier(.22,1,.36,1),
                  box-shadow .25s, scale .25s cubic-bezier(.34,1.56,.64,1);
    }
    .job-card.visible { opacity: 1; transform: none; }
    .job-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 24px rgba(0,0,0,.1), 0 0 0 1px var(--border);
    }
    .job-top { display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; }
    .job-tw { flex: 1; min-width: 0; }
    .job-title { font-size: 16px; font-weight: 700; letter-spacing: -.3px; line-height: 1.3; margin-bottom: 4px; }
    .job-co { font-size: 13px; color: var(--sub); font-weight: 500; }
    .site-pill {
      flex-shrink: 0; font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: .7px;
      background: rgba(0,113,227,.08); color: var(--blue); padding: 4px 10px; border-radius: 0;
    }
    .job-meta { display: flex; flex-wrap: wrap; gap: 6px; }
    .meta-tag {
      display: inline-flex; align-items: center; gap: 4px;
      font-size: 12px; font-weight: 500; color: var(--sub);
      background: var(--bg); padding: 4px 10px; border-radius: 0;
    }
    .meta-tag svg { flex-shrink: 0; }
    .meta-tag.remote { color: var(--green); background: rgba(52,199,89,.09); }
    .meta-tag.salary { color: var(--purple); background: rgba(142,78,198,.08); }
    .job-footer {
      display: flex; align-items: center; justify-content: space-between;
      gap: 8px; padding-top: 12px; border-top: 1px solid var(--border);
    }
    .job-date { font-size: 12px; color: var(--sub); display: flex; align-items: center; gap: 4px; }
    .job-actions { display: flex; align-items: center; gap: 8px; }
    .btn-det {
      height: 30px; padding: 0 14px;
      background: transparent; border: 1.5px solid var(--border); border-radius: 0;
      font-size: 12px; font-weight: 600; color: var(--sub); cursor: pointer; font-family: var(--font);
      transition: all .15s;
    }
    .btn-det:hover { border-color: var(--blue); color: var(--blue); background: rgba(0,113,227,.07); }
    .job-link { font-size: 13px; font-weight: 700; color: var(--blue); text-decoration: none; }
    .job-link:hover { opacity: .7; }

    /* â”€â”€ Message boxes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .msg-box {
      background: var(--surface); border-radius: 0; padding: 60px 32px; text-align: center;
      box-shadow: 0 1px 4px rgba(0,0,0,.05), 0 0 0 1px var(--border); display: none;
    }
    .msg-box .mi { font-size: 44px; margin-bottom: 16px; }
    .msg-box h3 { font-size: 20px; font-weight: 700; letter-spacing: -.4px; margin-bottom: 8px; }
    .msg-box p { font-size: 15px; color: var(--sub); line-height: 1.55; }
    .msg-box.err h3 { color: #FF3B30; }

    /* â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .modal-overlay {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,.45); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      z-index: 200; align-items: center; justify-content: center; padding: 24px;
    }
    .modal-overlay.open { display: flex; }
    .modal {
      background: var(--surface); border-radius: 0; width: 100%;
      max-width: 700px; max-height: 90vh; display: flex; flex-direction: column;
      box-shadow: 0 32px 80px rgba(0,0,0,.28);
      animation: modalIn .3s cubic-bezier(.34,1.56,.64,1);
    }
    @keyframes modalIn { from { opacity: 0; transform: scale(.88) translateY(20px); } to { opacity: 1; transform: none; } }
    .modal-hd {
      display: flex; align-items: flex-start; justify-content: space-between; gap: 16px;
      padding: 22px 24px 18px; border-bottom: 1px solid var(--border); flex-shrink: 0;
    }
    .modal-tb { flex: 1; min-width: 0; }
    .modal-title { font-size: 21px; font-weight: 800; letter-spacing: -.5px; line-height: 1.2; }
    .modal-company { font-size: 14px; color: var(--sub); margin-top: 5px; font-weight: 500; }
    .modal-close {
      width: 32px; height: 32px; background: var(--bg); border: none; border-radius: 0;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      color: var(--sub); flex-shrink: 0; transition: background .15s;
    }
    .modal-close:hover { background: var(--border); }
    .modal-body { overflow-y: auto; padding: 22px 24px 32px; flex: 1; display: flex; flex-direction: column; gap: 22px; }
    .detail-sec h4 {
      font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: .8px;
      color: var(--sub); margin-bottom: 10px;
    }
    .detail-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(155px,1fr)); gap: 8px; }
    .detail-item { background: var(--bg); border-radius: 0; padding: 10px 14px; }
    .di-label { font-size: 10px; color: var(--sub); font-weight: 700; text-transform: uppercase; letter-spacing: .5px; margin-bottom: 4px; }
    .di-value { font-size: 14px; font-weight: 600; word-break: break-word; }
    .detail-desc {
      background: var(--bg); border-radius: 0; padding: 16px 18px;
      font-size: 14px; line-height: 1.7; max-height: 300px; overflow-y: auto;
    }
    .detail-cta {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 12px 24px; background: var(--blue); color: #fff; border-radius: 0;
      font-size: 14px; font-weight: 700; text-decoration: none;
      transition: background .15s, transform .2s cubic-bezier(.34,1.56,.64,1);
    }
    .detail-cta:hover { background: var(--blue-h); transform: translateY(-1px); }
    .tag-list { display: flex; flex-wrap: wrap; gap: 6px; }
    .tag-list span { background: rgba(0,113,227,.08); color: var(--blue); font-size: 12px; font-weight: 600; padding: 4px 10px; border-radius: 0; }
    .md-body h1,.md-body h2,.md-body h3,.md-body h4 { font-weight: 700; margin: 14px 0 6px; }
    .md-body h1 { font-size: 16px; } .md-body h2 { font-size: 15px; } .md-body h3,.md-body h4 { font-size: 14px; }
    .md-body strong { font-weight: 700; } .md-body em { font-style: italic; }
    .md-body ul { list-style: disc; padding-left: 18px; } .md-body ol { list-style: decimal; padding-left: 18px; }
    .md-body li { margin-bottom: 3px; } .md-body p { margin-bottom: 8px; }
    .md-body a { color: var(--blue); text-decoration: none; } .md-body a:hover { text-decoration: underline; }
    .md-body code { font-family: var(--mono); font-size: 12px; background: rgba(0,0,0,.06); padding: 1px 5px; border-radius: 0; }
    html.dark .md-body code { background: rgba(255,255,255,.1); }
    .md-body hr { border: none; border-top: 1px solid var(--border); margin: 12px 0; }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 640px) {
      nav { padding: 0 16px; }
      .nav-links { position: static; transform: none; }
      .hero { padding: 60px 20px 36px; }
      .hero h1 { letter-spacing: -2px; }
      .form-card { padding: 22px 18px; }
      .form-grid { grid-template-columns: 1fr; }
      .jobs-grid { grid-template-columns: 1fr; }
      .modal-overlay { align-items: flex-end; padding: 0; }
      .modal { border-radius: 0; max-height: 92vh; }
    }
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: rgba(128,128,128,.28); border-radius: 0; }
  </style>
</head>
<body>

<!-- Nav -->
<nav>
  <a class="nav-logo" href="/">
    <div class="nav-logo-mark">
      <svg width="22" height="22" viewBox="0 0 20 20" fill="none">
        <rect x='2' y='7' width='16' height='11' stroke='currentColor' stroke-width='1.5' fill='none'/>
        <path d='M7 7V5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2' stroke='currentColor' stroke-width='1.5' fill='none'/>
        <circle cx='9.5' cy='12.5' r='2.8' stroke='currentColor' stroke-width='1.3' fill='none'/>
        <path d='M11.5 14.5L13.5 16.5' stroke='currentColor' stroke-width='1.3' stroke-linecap='round'/>
      </svg>
    </div>
    Job API
  </a>
  <div class="nav-links">
    <a href="/" class="nav-link active">Search</a>
    <a href="/docs.html" class="nav-link">Docs</a>
    <a href="/playground.html" class="nav-link">Playground</a>
  </div>
  <button class="dark-toggle" id="darkToggle" title="Toggle theme">
    <svg id="iconMoon" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 2a4 4 0 0 0 6 6 6 6 0 1 1-6-6z" fill="currentColor"/></svg>
    <svg id="iconSun" width="16" height="16" viewBox="0 0 16 16" fill="none" style="display:none"><circle cx="8" cy="8" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M8 1.5v1M8 13.5v1M1.5 8h1M13.5 8h1M3.4 3.4l.7.7M11.9 11.9l.7.7M3.4 12.6l.7-.7M11.9 4.1l.7-.7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
  </button>
</nav>

<!-- Hero -->
<div class="hero">
  <h1>
    <span class="hero-line"><span class="hero-line-inner"><span class="g-text">Job Search</span></span></span>
  </h1>
  <p class="hero-sub">Aggregate job postings.</p>
</div>

<div class="container">

  <!-- Search Form -->
  <div class="form-card">
    <div style="display:flex; align-items:baseline; justify-content:space-between; margin-bottom:14px;">
      <div class="sec-label" style="margin-bottom:0">Job Boards</div>
      <span style="font-size:12px; color:var(--sub);">&#9432;&nbsp; Only <strong style="color:var(--text); font-weight:600;">Indeed</strong> &amp; <strong style="color:var(--text); font-weight:600;">LinkedIn</strong> work reliably</span>
    </div>
    <div class="sites-grid" id="sitesGrid">
      <label class="site-chip active"><input type="checkbox" value="indeed" checked><span class="chip-dot"></span>Indeed</label>
      <label class="site-chip active"><input type="checkbox" value="linkedin" checked><span class="chip-dot"></span>LinkedIn</label>
      <label class="site-chip"><input type="checkbox" value="glassdoor"><span class="chip-dot"></span>Glassdoor</label>
      <label class="site-chip"><input type="checkbox" value="zip_recruiter"><span class="chip-dot"></span>ZipRecruiter</label>
      <label class="site-chip"><input type="checkbox" value="google"><span class="chip-dot"></span>Google Jobs</label>
      <label class="site-chip"><input type="checkbox" value="bayt"><span class="chip-dot"></span>Bayt</label>
      <label class="site-chip"><input type="checkbox" value="naukri"><span class="chip-dot"></span>Naukri</label>
      <label class="site-chip"><input type="checkbox" value="bdjobs"><span class="chip-dot"></span>BDJobs</label>
    </div>

    <div class="form-grid">
      <div class="field full">
        <label>Search Term</label>
        <input id="search_term" type="text" placeholder="e.g. software engineer, product managerâ€¦" />
      </div>
      <div class="field">
        <label>Location</label>
        <input id="location" type="text" placeholder="e.g. New York, NY" />
      </div>
      <div class="field">
        <label>Country (Indeed / Glassdoor)</label>
        <select id="country_indeed">
          <option value="">Any</option>
          <option value="USA" selected>USA</option>
          <option value="UK">UK</option>
          <option value="Canada">Canada</option>
          <option value="Australia">Australia</option>
          <option value="Germany">Germany</option>
          <option value="France">France</option>
          <option value="India">India</option>
          <option value="Singapore">Singapore</option>
          <option value="UAE">UAE</option>
        </select>
      </div>
      <div class="field">
        <label>Job Type</label>
        <select id="job_type">
          <option value="">Any</option>
          <option value="fulltime">Full-time</option>
          <option value="parttime">Part-time</option>
          <option value="contract">Contract</option>
          <option value="internship">Internship</option>
        </select>
      </div>
      <div class="field">
        <label>Remote</label>
        <select id="is_remote">
          <option value="">Any</option>
          <option value="true">Remote only</option>
          <option value="false">On-site only</option>
        </select>
      </div>
      <div class="field">
        <label>Results per Site</label>
        <input id="results_wanted" type="number" placeholder="15" min="1" max="100" value="15" />
      </div>
      <div class="field">
        <label>Posted Within (hours)</label>
        <input id="hours_old" type="number" placeholder="e.g. 72" min="1" />
      </div>
    </div>

    <div class="submit-row">
      <button class="btn-search" id="searchBtn" onclick="doSearch()">
        <span class="btn-icon">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <circle cx="6.5" cy="6.5" r="4.8" stroke="white" stroke-width="1.8"/>
            <path d="M10.5 10.5L14 14" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </span>
        <div class="spinner"></div>
        Search Jobs
      </button>
      <span class="btn-hint" id="hintText">Press Enter to search</span>
    </div>
  </div>

  <!-- Results -->
  <div id="results-section">
    <div class="results-hd">
      <h2>Results</h2>
      <span class="count-badge" id="countBadge">0 found</span>
    </div>
    <div class="jobs-grid" id="jobsGrid"></div>
  </div>

  <div class="msg-box err" id="errorBox">
    <div class="mi">âš ï¸</div>
    <h3>Something went wrong</h3>
    <p id="errorText"></p>
  </div>

  <div class="msg-box" id="emptyBox">
    <div class="mi">ğŸ”</div>
    <h3>No jobs found</h3>
    <p>Try broadening your search â€” fewer filters, a different location, or more sites.</p>
  </div>
</div>

<!-- Modal -->
<div class="modal-overlay" id="modalOverlay" onclick="handleOverlayClick(event)">
  <div class="modal">
    <div class="modal-hd">
      <div class="modal-tb">
        <div class="modal-title" id="mTitle"></div>
        <div class="modal-company" id="mCompany"></div>
      </div>
      <button class="modal-close" onclick="closeModal()">
        <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
          <path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    <div class="modal-body" id="mBody"></div>
  </div>
</div>

<script>
  let allJobs = [];

  // Chips
  document.querySelectorAll('.site-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      const cb = chip.querySelector('input');
      cb.checked = !cb.checked;
      chip.classList.toggle('active', cb.checked);
    });
  });

  const PIN    = `<svg width="11" height="13" viewBox="0 0 11 13" fill="none"><path d="M5.5 1C3.01 1 1 3.01 1 5.5c0 3.75 4.5 7.5 4.5 7.5s4.5-3.75 4.5-7.5C10 3.01 7.99 1 5.5 1Z" stroke="currentColor" stroke-width="1.4"/><circle cx="5.5" cy="5.5" r="1.5" stroke="currentColor" stroke-width="1.4"/></svg>`;
  const CLOCK  = `<svg width="12" height="12" viewBox="0 0 12 12" fill="none"><circle cx="6" cy="6" r="5" stroke="currentColor" stroke-width="1.4"/><path d="M6 3.5V6l2 1.5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>`;
  const DOLLAR = `<svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M6 1v10M3.5 8.5c0 .83.67 1.5 2.5 1.5s2.5-.67 2.5-1.5S7.83 7 6 7s-2.5-.67-2.5-1.5S4.17 4 6 4s2.5.67 2.5 1.5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>`;

  function fmtSalary(s) {
    if (!s) return null;
    const fmt = n => n >= 1000 ? `${(n/1000).toFixed(0)}k` : n;
    const cur = s.currency || '';
    const sym = cur === 'USD' ? '$' : cur === 'GBP' ? 'Â£' : cur === 'EUR' ? 'â‚¬' : cur + ' ';
    if (s.min_amount && s.max_amount) return `${sym}${fmt(s.min_amount)} â€“ ${sym}${fmt(s.max_amount)}`;
    if (s.min_amount) return `From ${sym}${fmt(s.min_amount)}`;
    if (s.max_amount) return `Up to ${sym}${fmt(s.max_amount)}`;
    return null;
  }

  function fmtDate(d) {
    if (!d) return null;
    try { return new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric', year: 'numeric' }).format(new Date(d)); }
    catch { return d; }
  }

  function fmtLoc(loc) {
    if (!loc) return null;
    if (typeof loc === 'string') return loc;
    return [loc.city, loc.state, loc.country].filter(Boolean).join(', ') || null;
  }

  function esc(s) {
    return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  function renderCard(job, idx) {
    const salary = fmtSalary(job.salary);
    const loc    = fmtLoc(job.location);
    const date   = fmtDate(job.date_posted);
    const site   = job.site || '';
    const meta   = [
      loc    ? `<span class="meta-tag">${PIN} ${esc(loc)}</span>` : '',
      job.is_remote ? `<span class="meta-tag remote">Remote</span>` : '',
      job.job_type  ? `<span class="meta-tag">${esc(job.job_type)}</span>` : '',
      salary ? `<span class="meta-tag salary">${DOLLAR} ${esc(salary)}</span>` : '',
    ].filter(Boolean).join('');

    return `<div class="job-card" style="transition-delay:${Math.min(idx*55,600)}ms">
      <div class="job-top">
        <div class="job-tw">
          <div class="job-title">${esc(job.title || 'Untitled')}</div>
          ${job.company ? `<div class="job-co">${esc(job.company)}</div>` : ''}
        </div>
        ${site ? `<span class="site-pill">${esc(site)}</span>` : ''}
      </div>
      ${meta ? `<div class="job-meta">${meta}</div>` : ''}
      <div class="job-footer">
        <span class="job-date">${date ? `${CLOCK} ${esc(date)}` : ''}</span>
        <div class="job-actions">
          <button class="btn-det" onclick="showDetail(${idx})">Details</button>
          ${job.job_url ? `<a class="job-link" href="${esc(job.job_url)}" target="_blank" rel="noopener">Apply &rarr;</a>` : ''}
        </div>
      </div>
    </div>`;
  }

  function showDetail(idx) {
    const job = allJobs[idx];
    if (!job) return;
    document.getElementById('mTitle').textContent = job.title || 'Untitled';
    document.getElementById('mCompany').textContent = [job.company, job.company_industry].filter(Boolean).join(' Â· ');

    const rows = [];
    const hdr = [['Site',job.site],['Job Type',job.job_type],['Level',job.job_level],
      ['Remote',job.is_remote!=null?(job.is_remote?'Yes âœ“':'No'):null],['Location',fmtLoc(job.location)],['Date Posted',fmtDate(job.date_posted)]
    ].filter(([,v])=>v!=null&&v!=='');
    if (hdr.length) rows.push(`<div class="detail-sec"><div class="detail-grid">${hdr.map(([l,v])=>`<div class="detail-item"><div class="di-label">${esc(l)}</div><div class="di-value">${esc(String(v))}</div></div>`).join('')}</div></div>`);

    if (job.salary && Object.values(job.salary).some(v=>v!=null)) {
      const s=job.salary;
      const si=[['Min',s.min_amount!=null?Number(s.min_amount).toLocaleString():null],['Max',s.max_amount!=null?Number(s.max_amount).toLocaleString():null],['Interval',s.interval],['Currency',s.currency]].filter(([,v])=>v!=null&&v!=='');
      if (si.length) rows.push(`<div class="detail-sec"><h4>Compensation</h4><div class="detail-grid">${si.map(([l,v])=>`<div class="detail-item"><div class="di-label">${esc(l)}</div><div class="di-value">${esc(String(v))}</div></div>`).join('')}</div></div>`);
    }

    const ci=[['Industry',job.company_industry],['Employees',job.company_employees_label],['Revenue',job.company_revenue_label],['Country',job.company_country]].filter(([,v])=>v!=null&&v!=='');
    if (ci.length||job.company_url||job.company_description) {
      let ch='';
      if (ci.length) ch+=`<div class="detail-grid" style="margin-bottom:10px">${ci.map(([l,v])=>`<div class="detail-item"><div class="di-label">${esc(l)}</div><div class="di-value">${esc(String(v))}</div></div>`).join('')}</div>`;
      if (job.company_url) ch+=`<a class="detail-cta" style="margin-bottom:10px" href="${esc(job.company_url)}" target="_blank" rel="noopener">Company Profile &rarr;</a>`;
      if (job.company_description) ch+=`<div class="detail-desc" style="margin-top:8px">${esc(job.company_description)}</div>`;
      rows.push(`<div class="detail-sec"><h4>Company</h4>${ch}</div>`);
    }

    if (Array.isArray(job.skills)&&job.skills.length) rows.push(`<div class="detail-sec"><h4>Skills</h4><div class="tag-list">${job.skills.map(s=>`<span>${esc(s)}</span>`).join('')}</div></div>`);
    if (Array.isArray(job.emails)&&job.emails.length) rows.push(`<div class="detail-sec"><h4>Contact Emails</h4><div class="tag-list">${job.emails.map(e=>`<span>${esc(e)}</span>`).join('')}</div></div>`);

    const ei=[['Experience',job.experience_range],['Rating',job.company_rating],['WFH Type',job.work_from_home_type]].filter(([,v])=>v!=null&&v!=='');
    if (ei.length) rows.push(`<div class="detail-sec"><h4>Additional Info</h4><div class="detail-grid">${ei.map(([l,v])=>`<div class="detail-item"><div class="di-label">${esc(l)}</div><div class="di-value">${esc(String(v))}</div></div>`).join('')}</div></div>`);

    if (job.description) {
      const isHtml=/<[a-z][\s\S]*>/i.test(job.description);
      const dh=isHtml?job.description:(typeof marked!=='undefined'?marked.parse(job.description):`<pre style="white-space:pre-wrap">${esc(job.description)}</pre>`);
      rows.push(`<div class="detail-sec"><h4>Job Description</h4><div class="detail-desc md-body">${dh}</div></div>`);
    }

    if (job.job_url) rows.push(`<div><a class="detail-cta" href="${esc(job.job_url)}" target="_blank" rel="noopener">Apply / View Posting &rarr;</a></div>`);

    document.getElementById('mBody').innerHTML = rows.join('');
    document.getElementById('modalOverlay').classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    document.getElementById('modalOverlay').classList.remove('open');
    document.body.style.overflow = '';
  }

  function handleOverlayClick(e) {
    if (e.target === document.getElementById('modalOverlay')) closeModal();
  }

  document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

  async function doSearch() {
    const btn   = document.getElementById('searchBtn');
    const sites = [...document.querySelectorAll('.site-chip input:checked')].map(c => c.value);
    if (!sites.length) { alert('Select at least one job board.'); return; }

    const params = new URLSearchParams();
    params.set('site_name', sites.join(','));
    const get = id => document.getElementById(id).value.trim();
    if (get('search_term'))    params.set('search_term',    get('search_term'));
    if (get('location'))       params.set('location',       get('location'));
    if (get('country_indeed')) params.set('country_indeed', get('country_indeed'));
    if (get('job_type'))       params.set('job_type',       get('job_type'));
    if (get('is_remote'))      params.set('is_remote',      get('is_remote'));
    if (get('results_wanted')) params.set('results_wanted', get('results_wanted'));
    if (get('hours_old'))      params.set('hours_old',      get('hours_old'));

    btn.disabled = true; btn.classList.add('loading');
    document.getElementById('hintText').textContent = 'Scraping job boards\u2026';
    document.getElementById('results-section').style.display = 'none';
    document.getElementById('errorBox').style.display = 'none';
    document.getElementById('emptyBox').style.display = 'none';

    try {
      const res  = await fetch(`/api/jobs?${params}`);
      const data = await res.json();
      if (!res.ok) throw new Error(data.error || `HTTP ${res.status}`);
      const jobs = data.jobs || [];
      if (!jobs.length) {
        document.getElementById('emptyBox').style.display = 'block';
      } else {
        allJobs = jobs;
        document.getElementById('jobsGrid').innerHTML = jobs.map((j,i) => renderCard(j,i)).join('');
        document.getElementById('countBadge').textContent = `${jobs.length} found`;
        document.getElementById('results-section').style.display = 'block';
        requestAnimationFrame(() => {
          document.querySelectorAll('.job-card').forEach((card, i) => {
            setTimeout(() => card.classList.add('visible'), i * 55);
          });
        });
      }
      document.getElementById('hintText').textContent = `Done \u2014 ${jobs.length} job(s) returned.`;
    } catch (err) {
      document.getElementById('errorText').textContent = err.message;
      document.getElementById('errorBox').style.display = 'block';
      document.getElementById('hintText').textContent = 'Search failed.';
    } finally {
      btn.disabled = false; btn.classList.remove('loading');
    }
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !document.getElementById('searchBtn').disabled
      && !document.getElementById('modalOverlay').classList.contains('open')) doSearch();
  });

  // Dark mode
  (function() {
    const root = document.documentElement;
    const btn  = document.getElementById('darkToggle');
    const moon = document.getElementById('iconMoon');
    const sun  = document.getElementById('iconSun');
    function apply(on) {
      root.classList.toggle('dark', on);
      moon.style.display = on ? 'none' : 'block';
      sun.style.display  = on ? 'block' : 'none';
    }
    apply(localStorage.getItem('theme') !== 'light');
    btn.addEventListener('click', () => {
      const d = !root.classList.contains('dark');
      apply(d); localStorage.setItem('theme', d ? 'dark' : 'light');
    });
  })();
</script>
</body>
</html>
